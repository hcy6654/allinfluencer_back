server:
  port: ${SERVER_PORT:8080}
  servlet:
    context-path: /api/v1

spring:
  application:
    name: allinfluencer-backend
  datasource:
    url: ${DATABASE_URL:jdbc:postgresql://localhost:5432/allinfluencer}
    username: ${DATABASE_USERNAME:allinfluencer}
    password: ${DATABASE_PASSWORD:allinfluencer}
  jpa:
    hibernate:
      ddl-auto: validate
      naming:
        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
    properties:
      hibernate:
        format_sql: true
        globally_quoted_identifiers: true
    open-in-view: false
  flyway:
    enabled: true
    baseline-on-migrate: true
    baseline-version: 0
    baseline-description: "existing schema (created by Prisma)"

  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID:dummy-google-client-id}
            client-secret: ${GOOGLE_CLIENT_SECRET:dummy-google-client-secret}
            scope:
              - openid
              - profile
              - email
            redirect-uri: "{baseUrl}/auth/{registrationId}/callback"
          kakao:
            client-id: ${KAKAO_CLIENT_ID:dummy-kakao-client-id}
            client-secret: ${KAKAO_CLIENT_SECRET:dummy-kakao-client-secret}
            client-authentication-method: client_secret_post
            authorization-grant-type: authorization_code
            redirect-uri: "{baseUrl}/auth/{registrationId}/callback"
            scope:
              - profile_nickname
              - profile_image
              - account_email
          naver:
            client-id: ${NAVER_CLIENT_ID:dummy-naver-client-id}
            client-secret: ${NAVER_CLIENT_SECRET:dummy-naver-client-secret}
            client-authentication-method: client_secret_post
            authorization-grant-type: authorization_code
            redirect-uri: "{baseUrl}/auth/{registrationId}/callback"
            scope:
              - name
              - email
              - profile_image

        provider:
          kakao:
            authorization-uri: https://kauth.kakao.com/oauth/authorize
            token-uri: https://kauth.kakao.com/oauth/token
            user-info-uri: https://kapi.kakao.com/v2/user/me
            user-name-attribute: id
          naver:
            authorization-uri: https://nid.naver.com/oauth2.0/authorize
            token-uri: https://nid.naver.com/oauth2.0/token
            user-info-uri: https://openapi.naver.com/v1/nid/me
            user-name-attribute: response

mybatis:
  mapper-locations: classpath:/mybatis/mapper/**/*.xml
  type-handlers-package: com.allinfluencer.backend.mypage.infrastructure.mybatis.typehandler
  configuration:
    map-underscore-to-camel-case: true

logging:
  level:
    org.hibernate.SQL: info
    org.springframework.security: info

app:
  security:
    jwt:
      issuer: ${JWT_ISSUER:all-influencer}
      # jjwt는 HS256 기준 최소 32바이트(256-bit) 키가 필요합니다.
      secret: ${JWT_SECRET:dev-secret-change-me-please-change-to-32bytes}
      access-token-seconds: ${JWT_ACCESS_TOKEN_SECONDS:3600}

  oauth:
    redirect-success: ${OAUTH_REDIRECT_SUCCESS:http://localhost:3000/auth/success}
    redirect-failure: ${OAUTH_REDIRECT_FAILURE:http://localhost:3000/auth/failure}

